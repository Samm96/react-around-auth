{"ast":null,"code":"import _toConsumableArray from\"/Users/samanthahorsch/Desktop/BOOTCAMP - PRACTICUM - CODING/Projects/Sprint 10 Around The U.S. React/around-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/samanthahorsch/Desktop/BOOTCAMP - PRACTICUM - CODING/Projects/Sprint 10 Around The U.S. React/around-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import Header from\"./Header\";import Footer from\"./Footer\";import Main from\"./Main\";import ImagePopup from\"./ImagePopup\";import{api}from\"../utils/Api\";import{CurrentUserContext}from\"../contexts/CurrentUserContext\";import EditProfilePopup from\"./EditProfilePopup\";import EditAvatarPopup from\"./EditAvatarPopup\";import AddPlacePopup from\"./AddPlacePopup\";import DeleteConfirmPopup from\"./DeleteConfirmPopup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isEditProfilePopupOpen=_React$useState2[0],setIsEditProfilePopupOpen=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isAddPlacePopupOpen=_React$useState4[0],setAddPlacePopupOpen=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isEditAvatarPopupOpen=_React$useState6[0],setEditAvatarPopupOpen=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isDeleteConfirmPopupOpen=_React$useState8[0],setDeleteConfirmPopupOpen=_React$useState8[1];var _React$useState9=React.useState(null),_React$useState10=_slicedToArray(_React$useState9,2),selectedCard=_React$useState10[0],setSelectedCard=_React$useState10[1];var _React$useState11=React.useState(null),_React$useState12=_slicedToArray(_React$useState11,2),selectedCardToDelete=_React$useState12[0],setSelectedCardToDelete=_React$useState12[1];var _React$useState13=React.useState(false),_React$useState14=_slicedToArray(_React$useState13,2),isLoading=_React$useState14[0],setIsLoading=_React$useState14[1];var _React$useState15=React.useState({name:\"\",about:\"\",avatar:\"\"}),_React$useState16=_slicedToArray(_React$useState15,2),currentUser=_React$useState16[0],setCurrentUser=_React$useState16[1];var _React$useState17=React.useState([]),_React$useState18=_slicedToArray(_React$useState17,2),cards=_React$useState18[0],setCards=_React$useState18[1];React.useEffect(function(){api.getInitialCardList().then(function(cardData){setCards(cardData);}).catch(function(err){return console.log(err);});},[]);function handleCardLike(card){var isLiked=card.likes.some(function(user){return user._id===currentUser._id;});api.toggleLikeCardStatus(card._id,!isLiked).then(function(newCard){setCards(function(state){return state.map(function(currentCard){return currentCard._id===card._id?newCard:currentCard;});});}).catch(function(err){return console.log(err);});}function handleCardAdd(data){setIsLoading(true);api.addCard(data).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));closeAllPopups();}).catch(function(err){return console.log(err);}).finally(function(){setIsLoading(false);});}function handleCardDelete(card){api.removeCard(card).then(function(){setCards(function(cardData){return cardData.filter(function(c){return c._id!==card._id;});});closeAllPopups();}).catch(function(err){return console.log(err);});}function handleCardDeleteSubmit(card){handleCardDelete(card);}React.useEffect(function(){api.getUserInfo().then(function(userData){setCurrentUser(userData);}).catch(function(err){return console.log(err);});},[]);function handleEditAvatarClick(){setEditAvatarPopupOpen(true);}function handleEditProfileClick(){setIsEditProfilePopupOpen(true);}function handleUpdateUser(userUpdate){setIsLoading(true);api.setUserInfo(userUpdate).then(function(newUserData){setCurrentUser(newUserData);closeAllPopups();}).catch(function(err){return console.log(err);}).finally(function(){setIsLoading(false);});}function handleUpdateAvatar(avatarUpdate){setIsLoading(true);api.updateProfilePicture(avatarUpdate).then(function(newAvatar){setCurrentUser(newAvatar);closeAllPopups();}).catch(function(err){return console.log(err);}).finally(function(){setIsLoading(false);});}function handleAddPlaceClick(){setAddPlacePopupOpen(true);}function handleDeleteConfirmClick(card){setSelectedCardToDelete(card);setDeleteConfirmPopupOpen(true);}function handleCardClick(card){setSelectedCard(card);}function closeAllPopups(){setIsEditProfilePopupOpen(false);setEditAvatarPopupOpen(false);setAddPlacePopupOpen(false);setDeleteConfirmPopupOpen(false);setSelectedCard(null);}React.useEffect(function(){var closeByEscape=function closeByEscape(e){if(e.key==\"Escape\"){closeAllPopups();}};document.addEventListener(\"keydown\",closeByEscape);return function(){return document.removeEventListener(\"keydown\",closeByEscape);};},[]);return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onEditProfileClick:handleEditProfileClick,onAddPlaceClick:handleAddPlaceClick,onEditAvatarClick:handleEditAvatarClick,onCardDeleteClick:handleDeleteConfirmClick,onCardClick:handleCardClick,onCardLike:handleCardLike,cards:cards}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar,buttonText:isLoading?\"Saving...\":\"Save\"}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser,buttonText:isLoading?\"Saving...\":\"Save\"}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onCardAdd:handleCardAdd,buttonText:isLoading?\"Creating...\":\"Create\"}),/*#__PURE__*/_jsx(DeleteConfirmPopup,{title:\"Are you sure?\",isOpen:isDeleteConfirmPopupOpen,onClose:closeAllPopups,onDeleteCardSubmit:handleCardDeleteSubmit,cardToDelete:selectedCardToDelete}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,onClose:closeAllPopups})]})})});}export default App;","map":{"version":3,"sources":["/Users/samanthahorsch/Desktop/BOOTCAMP - PRACTICUM - CODING/Projects/Sprint 10 Around The U.S. React/around-react/src/components/App.js"],"names":["React","Header","Footer","Main","ImagePopup","api","CurrentUserContext","EditProfilePopup","EditAvatarPopup","AddPlacePopup","DeleteConfirmPopup","App","useState","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isDeleteConfirmPopupOpen","setDeleteConfirmPopupOpen","selectedCard","setSelectedCard","selectedCardToDelete","setSelectedCardToDelete","isLoading","setIsLoading","name","about","avatar","currentUser","setCurrentUser","cards","setCards","useEffect","getInitialCardList","then","cardData","catch","err","console","log","handleCardLike","card","isLiked","likes","some","user","_id","toggleLikeCardStatus","newCard","state","map","currentCard","handleCardAdd","data","addCard","closeAllPopups","finally","handleCardDelete","removeCard","filter","c","handleCardDeleteSubmit","getUserInfo","userData","handleEditAvatarClick","handleEditProfileClick","handleUpdateUser","userUpdate","setUserInfo","newUserData","handleUpdateAvatar","avatarUpdate","updateProfilePicture","newAvatar","handleAddPlaceClick","handleDeleteConfirmClick","handleCardClick","closeByEscape","e","key","document","addEventListener","removeEventListener"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport Main from \"./Main\";\nimport ImagePopup from \"./ImagePopup\";\nimport { api } from \"../utils/Api\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport DeleteConfirmPopup from \"./DeleteConfirmPopup\";\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] =\n    React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\n  const [isDeleteConfirmPopupOpen, setDeleteConfirmPopupOpen] =\n    React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState(null);\n  const [selectedCardToDelete, setSelectedCardToDelete] = React.useState(null);\n  const [isLoading, setIsLoading] = React.useState(false);\n\n  const [currentUser, setCurrentUser] = React.useState({\n    name: \"\",\n    about: \"\",\n    avatar: \"\",\n  });\n\n  const [cards, setCards] = React.useState([]);\n\n  React.useEffect(() => {\n    api\n      .getInitialCardList()\n      .then((cardData) => {\n        setCards(cardData);\n      })\n      .catch((err) => console.log(err));\n  }, []);\n  \n  function handleCardLike(card) {\n    const isLiked = card.likes.some(user => user._id === currentUser._id);\n    api\n      .toggleLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((currentCard) => currentCard._id === card._id ? newCard : currentCard));\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleCardAdd(data) {\n    setIsLoading(true);\n    api\n      .addCard(data)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err))\n      .finally(() => {\n        setIsLoading(false);\n      })\n  }\n  \n  function handleCardDelete(card) {\n    api\n      .removeCard(card)\n      .then(() => {\n        setCards((cardData) => cardData.filter((c) => c._id !== card._id));\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleCardDeleteSubmit(card) {\n    handleCardDelete(card);\n  }\n\n  React.useEffect(() => {\n    api\n      .getUserInfo()\n      .then((userData) => {\n        setCurrentUser(userData);\n      })\n      .catch((err) => console.log(err));\n  }, []);\n\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleUpdateUser(userUpdate) {\n    setIsLoading(true);\n    api\n      .setUserInfo(userUpdate)\n      .then((newUserData) => {\n        setCurrentUser(newUserData);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err))\n      .finally(() => {\n        setIsLoading(false);\n      })\n  }\n\n  function handleUpdateAvatar(avatarUpdate) {\n    setIsLoading(true);\n    api\n      .updateProfilePicture(avatarUpdate)\n      .then((newAvatar) => {\n        setCurrentUser(newAvatar);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err))\n      .finally(() => {\n        setIsLoading(false);\n      })\n  }\n\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(true);\n  }\n\n  function handleDeleteConfirmClick(card) {\n    setSelectedCardToDelete(card);\n    setDeleteConfirmPopupOpen(true);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setEditAvatarPopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setDeleteConfirmPopupOpen(false);\n    setSelectedCard(null);\n  }\n\n  React.useEffect(() => {\n    const closeByEscape = (e) => {\n      if(e.key == \"Escape\") {\n        closeAllPopups();\n      }\n    }\n\n    document.addEventListener(\"keydown\", closeByEscape);\n\n    return () => document.removeEventListener(\"keydown\", closeByEscape);\n  }, []);\n\n  return (\n      <CurrentUserContext.Provider value={currentUser}>\n        <div className=\"page\">\n          <div>\n            <Header />\n            <Main\n              onEditProfileClick={handleEditProfileClick}\n              onAddPlaceClick={handleAddPlaceClick}\n              onEditAvatarClick={handleEditAvatarClick}\n              onCardDeleteClick={handleDeleteConfirmClick}\n              onCardClick={handleCardClick}\n              onCardLike={handleCardLike}\n              cards={cards}\n            />\n            <Footer />\n\n            <EditAvatarPopup\n              isOpen={isEditAvatarPopupOpen}\n              onClose={closeAllPopups}\n              onUpdateAvatar={handleUpdateAvatar}\n              buttonText={isLoading ? \"Saving...\" : \"Save\"}\n            />\n\n            <EditProfilePopup\n              isOpen={isEditProfilePopupOpen}\n              onClose={closeAllPopups}\n              onUpdateUser={handleUpdateUser}\n              buttonText={isLoading ? \"Saving...\" : \"Save\"}\n            />\n\n            <AddPlacePopup \n              isOpen={isAddPlacePopupOpen}\n              onClose={closeAllPopups}\n              onCardAdd={handleCardAdd}\n              buttonText={isLoading ? \"Creating...\" : \"Create\"}\n            />\n\n            <DeleteConfirmPopup\n              title=\"Are you sure?\"\n              isOpen={isDeleteConfirmPopupOpen}\n              onClose={closeAllPopups}\n              onDeleteCardSubmit={handleCardDeleteSubmit}\n              cardToDelete={selectedCardToDelete}\n            ></DeleteConfirmPopup>\n\n            <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n          </div>\n        </div>\n      </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}